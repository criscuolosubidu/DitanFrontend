# è°ƒè¯•æŒ‡å—ï¼šå®šä½ç½‘ç»œè¿æ¥é—®é¢˜

## é—®é¢˜ç°è±¡

æ³¨å†Œå’Œç™»å½•éƒ½æ˜¾ç¤º"æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨"ã€‚

## æ’æŸ¥æ­¥éª¤

### 1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·

1. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
2. ç‚¹å‡» `Console` æ ‡ç­¾æŸ¥çœ‹æ—¥å¿—
3. ç‚¹å‡» `Network` æ ‡ç­¾æŸ¥çœ‹ç½‘ç»œè¯·æ±‚

### 2. å°è¯•ç™»å½•/æ³¨å†Œ

1. åœ¨ç™»å½•é¡µé¢è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
2. ç‚¹å‡»ç™»å½•æŒ‰é’®
3. **ç«‹å³æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°**

### 3. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

ç°åœ¨ä»£ç ä¼šè‡ªåŠ¨æ‰“å°è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼š

#### æˆåŠŸçš„æƒ…å†µ
```javascript
ğŸš€ API Request: { method: 'POST', url: '/login', baseURL: '...', fullURL: '...' }
âœ… API Response Success: { status: 200, data: {...} }
```

#### å¤±è´¥çš„æƒ…å†µï¼ˆç½‘ç»œé”™è¯¯ï¼‰
```javascript
ğŸš€ API Request: { method: 'POST', url: '/login', baseURL: '...', fullURL: '...' }
âŒ API Error: { url: '/login', fullURL: 'https://...', message: '...' }
ğŸŒ Network Error (No Response): { code: 'ECONNABORTED', message: 'timeout' }
ğŸ’¡ å¯èƒ½çš„åŸå› ï¼š
  1. åç«¯æœåŠ¡æœªå¯åŠ¨
  2. APIåœ°å€é”™è¯¯
  3. CORSè·¨åŸŸé—®é¢˜
  4. ç½‘ç»œè¿æ¥é—®é¢˜
  5. é˜²ç«å¢™é˜»æ­¢è¿æ¥
```

#### å¤±è´¥çš„æƒ…å†µï¼ˆCORSè·¨åŸŸï¼‰
```javascript
ğŸš€ API Request: { method: 'POST', url: '/login', ... }
âŒ API Error: { message: 'Network Error', ... }
ğŸŒ Network Error (No Response): { ... }
```

#### å¤±è´¥çš„æƒ…å†µï¼ˆ404æ¥å£ä¸å­˜åœ¨ï¼‰
```javascript
ğŸš€ API Request: { method: 'POST', url: '/login', ... }
âŒ API Error: { ... }
ğŸ“Š Response Error Details: { status: 404, ... }
```

### 4. æŸ¥çœ‹Networkæ ‡ç­¾

åœ¨ Network æ ‡ç­¾ä¸­ï¼š

1. **æ‰¾åˆ°ç™»å½•è¯·æ±‚**ï¼ˆé€šå¸¸ä»¥ `login` å‘½åï¼‰
2. **ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…**
3. **æŸ¥çœ‹ä»¥ä¸‹ä¿¡æ¯**ï¼š

#### Headers æ ‡ç­¾
- **Request URL**: å®Œæ•´è¯·æ±‚åœ°å€
- **Request Method**: POST
- **Request Headers**: è¯·æ±‚å¤´ä¿¡æ¯
- **Response Headers**: å“åº”å¤´ä¿¡æ¯

#### Preview/Response æ ‡ç­¾
- æŸ¥çœ‹æœåŠ¡å™¨è¿”å›çš„æ•°æ®

#### å¸¸è§é—®é¢˜åŠçŠ¶æ€ç 
- **çº¢è‰²è¯·æ±‚** + `pending` â†’ è¯·æ±‚æœªå‘é€/ç½‘ç»œé—®é¢˜
- **çº¢è‰²è¯·æ±‚** + `(failed)` â†’ æ— æ³•è¿æ¥æœåŠ¡å™¨
- **çº¢è‰²è¯·æ±‚** + `CORS error` â†’ è·¨åŸŸé—®é¢˜
- **404** â†’ æ¥å£ä¸å­˜åœ¨
- **500** â†’ æœåŠ¡å™¨é”™è¯¯
- **401** â†’ æœªæˆæƒï¼ˆç”¨æˆ·åå¯†ç é”™è¯¯ï¼‰
- **400** â†’ è¯·æ±‚å‚æ•°é”™è¯¯

### 5. å¿«é€ŸéªŒè¯APIæ˜¯å¦å¯ç”¨

æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· Consoleï¼Œè¿è¡Œä»¥ä¸‹ä»£ç ï¼š

```javascript
// æµ‹è¯•æ³¨å†Œæ¥å£
fetch('https://www.universalfuture.online/api/v1/doctor/register', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    username: 'test_user',
    name: 'æµ‹è¯•åŒ»ç”Ÿ',
    password: '123456',
    gender: 'MALE',
    phone: '13800138000',
    department: 'æµ‹è¯•ç§‘å®¤'
  })
})
.then(res => console.log('âœ… æ¥å£å¯ä»¥è¿æ¥', res))
.catch(err => console.error('âŒ æ— æ³•è¿æ¥', err))
```

### 6. ä½¿ç”¨curlå‘½ä»¤æµ‹è¯•ï¼ˆå¦‚æœå®‰è£…äº†ï¼‰

åœ¨ç»ˆç«¯è¿è¡Œï¼š

```bash
# æµ‹è¯•æ³¨å†Œæ¥å£
curl -X POST https://www.universalfuture.online/api/v1/doctor/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "test_user",
    "name": "æµ‹è¯•åŒ»ç”Ÿ",
    "password": "123456",
    "gender": "MALE",
    "phone": "13800138000",
    "department": "æµ‹è¯•ç§‘å®¤"
  }'

# æµ‹è¯•ç™»å½•æ¥å£
curl -X POST https://www.universalfuture.online/api/v1/doctor/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "test_user",
    "password": "123456"
  }'
```

## å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: CORSè·¨åŸŸé”™è¯¯

**ç°è±¡**ï¼š
```
Access to fetch at '...' from origin 'http://localhost:5173' has been blocked by CORS policy
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- éœ€è¦åœ¨åç«¯é…ç½®CORSå…è®¸çš„æº
- æˆ–è€…åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨Viteä»£ç†

**ä½¿ç”¨Viteä»£ç†**ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰ï¼š
ä¿®æ”¹ `vite.config.js`ï¼š

```javascript
export default {
  server: {
    proxy: {
      '/api': {
        target: 'https://www.universalfuture.online',
        changeOrigin: true,
        secure: true
      }
    }
  }
}
```

ç„¶ååœ¨ `src/api/auth.js` ä¿®æ”¹ä¸ºï¼š
```javascript
const API_BASE_URL = '/api/v1/doctor'
```

### é—®é¢˜2: ç½‘ç»œè¶…æ—¶

**ç°è±¡**ï¼š
```
timeout of 10000ms exceeded
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆä¿®æ”¹ `src/api/auth.js` ä¸­çš„ `timeout`ï¼‰
- æ£€æŸ¥ç½‘ç»œè¿æ¥

### é—®é¢˜3: åç«¯æœåŠ¡ç¡®å®æœªå¯åŠ¨

**ç°è±¡**ï¼š
```
ERR_CONNECTION_REFUSED
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- è”ç³»åç«¯å¼€å‘è€…ç¡®è®¤æœåŠ¡æ˜¯å¦å¯åŠ¨
- ç¡®è®¤APIåœ°å€æ˜¯å¦æ­£ç¡®

### é—®é¢˜4: SSLè¯ä¹¦é”™è¯¯

**ç°è±¡**ï¼š
```
ERR_CERT_INVALID
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥æ˜¯å¦ä½¿ç”¨HTTPS
- å¦‚æœæ˜¯å†…éƒ¨æµ‹è¯•ç¯å¢ƒï¼Œå¯èƒ½éœ€è¦æ·»åŠ è¯ä¹¦

### é—®é¢˜5: æ¥å£åœ°å€é”™è¯¯

**æ£€æŸ¥æ¸…å•**ï¼š
1. âœ… ç¡®è®¤APIåœ°å€ï¼š`https://www.universalfuture.online/api/v1/doctor`
2. âœ… ç¡®è®¤æ¥å£è·¯å¾„ï¼š`/register` å’Œ `/login`
3. âœ… ç¡®è®¤è¯·æ±‚æ–¹æ³•ï¼š`POST`
4. âœ… ç¡®è®¤Content-Typeï¼š`application/json`

## ä½¿ç”¨Mockæ•°æ®æµ‹è¯•

å¦‚æœåç«¯æš‚æ—¶æ— æ³•è¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨Mockæ•°æ®æµ‹è¯•å‰ç«¯åŠŸèƒ½ï¼š

ä¿®æ”¹ `src/views/Login.vue` å’Œ `src/views/Register.vue`ï¼š

```javascript
// ä»
import { loginDoctor } from '../api/auth'
// æ”¹ä¸º
import { loginDoctor } from '../api/auth-mock'
```

## å®Œæ•´è°ƒè¯•æ£€æŸ¥æ¸…å•

- [ ] æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ï¼Ÿ
- [ ] Networkæ ‡ç­¾ä¸­è¯·æ±‚æ˜¯å¦å‘é€ï¼Ÿ
- [ ] è¯·æ±‚URLæ˜¯å¦æ­£ç¡®ï¼Ÿ
- [ ] è¯·æ±‚æ–¹æ³•æ˜¯å¦POSTï¼Ÿ
- [ ] Content-Typeæ˜¯å¦application/jsonï¼Ÿ
- [ ] æ˜¯å¦æœ‰CORSé”™è¯¯ï¼Ÿ
- [ ] æ˜¯å¦æœ‰ç½‘ç»œè¶…æ—¶ï¼Ÿ
- [ ] åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œï¼Ÿ
- [ ] æ˜¯å¦å¯ä»¥pingé€šæœåŠ¡å™¨ï¼Ÿ
- [ ] æ˜¯å¦æœ‰é˜²ç«å¢™é˜»æ­¢ï¼Ÿ
- [ ] APIåœ°å€æ˜¯å¦æ­£ç¡®ï¼Ÿ

## è·å–è¯¦ç»†æ—¥å¿—

ä¿®æ”¹ `src/api/auth.js` ä¸­çš„è¶…æ—¶æ—¶é—´ï¼ˆå¯é€‰ï¼‰ï¼š

```javascript
const apiClient = axios.create({
  baseURL: API_BASE_URL,
  timeout: 30000, // æ”¹ä¸º30ç§’
  headers: {
    'Content-Type': 'application/json'
  }
})
```

## è”ç³»æ”¯æŒ

å¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·æä¾›ï¼š

1. æµè§ˆå™¨æ§åˆ¶å°å®Œæ•´æ—¥å¿—ï¼ˆæˆªå›¾ï¼‰
2. Networkæ ‡ç­¾ä¸­å¤±è´¥çš„è¯·æ±‚è¯¦æƒ…ï¼ˆæˆªå›¾ï¼‰
3. ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬
4. æ“ä½œç³»ç»Ÿç‰ˆæœ¬
5. å…·ä½“é”™è¯¯ä¿¡æ¯

